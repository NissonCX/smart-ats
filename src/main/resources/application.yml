# ==================== SmartATS åº”ç”¨é…ç½® ====================
#
# ğŸ“Œ ç¯å¢ƒé…ç½®è¯´æ˜ï¼š
#    - å¼€å‘ç¯å¢ƒï¼šä½¿ç”¨ application-dev.ymlï¼ˆé»˜è®¤æ¿€æ´»ï¼‰
#    - ç”Ÿäº§ç¯å¢ƒï¼šä½¿ç”¨ application-prod.yml
#    - åˆ‡æ¢æ–¹å¼ï¼šè®¾ç½®ç¯å¢ƒå˜é‡ SPRING_PROFILES_ACTIVE=prod
# ================================================================

spring:
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}

  # ğŸ“Œ æœ¬åœ° .env æ–‡ä»¶è‡ªåŠ¨åŠ è½½ï¼ˆSpring Boot 2.4+ å†…ç½®æ”¯æŒï¼Œæ— éœ€é¢å¤–ä¾èµ–ï¼‰
  # .env ä¸­çš„å˜é‡ä¼šè¢«æ³¨å…¥åˆ° ${KEY:default} å ä½ç¬¦ä¸­
  config:
    import: optional:file:.env[.properties]

  servlet:
    multipart:
      enabled: true
      max-file-size: 10MB       # å•ä¸ªæ–‡ä»¶æœ€å¤§ 10MB
      max-request-size: 50MB    # è¯·æ±‚æœ€å¤§ 50MB
      file-size-threshold: 2MB  # è¶…è¿‡ 2MB æ‰å†™å…¥ç£ç›˜

  mail:
    host: ${MAIL_HOST:smtp.qq.com}
    port: ${MAIL_PORT:587}
    username: ${MAIL_USERNAME:your_email@qq.com}
    password: ${MAIL_PASSWORD:}   # ä»ç¯å¢ƒå˜é‡è¯»å–ï¼Œæœ¬åœ°å¼€å‘åœ¨ .env æˆ– IDE ä¸­é…ç½®
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
        ssl:
          trust: smtp.qq.com
    default-encoding: UTF-8

  application:
    name: smartats              # åº”ç”¨åç§°ï¼ˆä¼šåœ¨æ—¥å¿—ã€ç›‘æ§ä¸­æ˜¾ç¤ºï¼‰

  # ==================== æ•°æ®åº“é…ç½® ====================
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver    # MySQL é©±åŠ¨ç±»
    url: jdbc:mysql://${DB_HOST:localhost}:${DB_PORT:3307}/${DB_NAME:smartats}?useSSL=false&serverTimezone=Asia/Shanghai
    username: ${DB_USERNAME:smartats}                     # æ•°æ®åº“ç”¨æˆ·å
    password: ${DB_PASSWORD:smartats123}                          # æ•°æ®åº“å¯†ç ï¼ˆä»ç¯å¢ƒå˜é‡è¯»å–ï¼‰

    # ğŸ“Œ HikariCP è¿æ¥æ± é…ç½®ï¼ˆSpring Boot é»˜è®¤è¿æ¥æ± ï¼‰
    hikari:
      maximum-pool-size: 20       # æœ€å¤§è¿æ¥æ•°ï¼ˆæ ¹æ®æ•°æ®åº“æ€§èƒ½è°ƒæ•´ï¼‰
      minimum-idle: 5             # æœ€å°ç©ºé—²è¿æ¥æ•°
      connection-timeout: 30000   # è·å–è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
      idle-timeout: 600000       # ç©ºé—²è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆ10åˆ†é’Ÿï¼‰

  # ==================== Redis é…ç½® ====================
  data:
    redis:
      host: ${REDIS_HOST:localhost}            # Redis æœåŠ¡å™¨åœ°å€
      port: ${REDIS_PORT:6379}                # Redis ç«¯å£
      password: ${REDIS_PASSWORD:}                # Redis å¯†ç ï¼ˆä»ç¯å¢ƒå˜é‡è¯»å–ï¼‰
      database: 0               # Redis æ•°æ®åº“ç´¢å¼•ï¼ˆ0-15ï¼Œå…±16ä¸ªåº“ï¼‰
      timeout: 5000             # è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰

      # ğŸ“Œ Lettuce è¿æ¥æ± é…ç½®ï¼ˆSpring Boot é»˜è®¤ Redis å®¢æˆ·ç«¯ï¼‰
      lettuce:
        pool:
          max-active: 20         # æœ€å¤§æ´»è·ƒè¿æ¥æ•°
          max-idle: 10          # æœ€å¤§ç©ºé—²è¿æ¥æ•°
          min-idle: 5           # æœ€å°ç©ºé—²è¿æ¥æ•°

  # ==================== RabbitMQ é…ç½® ====================
  rabbitmq:
    host: ${RABBITMQ_HOST:localhost}             # RabbitMQ æœåŠ¡å™¨åœ°å€
    port: ${RABBITMQ_PORT:5672}                 # AMQP åè®®ç«¯å£ï¼ˆç®¡ç†ç•Œé¢æ˜¯ 15672ï¼‰
    username: ${RABBITMQ_USERNAME:admin}            # ç”¨æˆ·å
    password: ${RABBITMQ_PASSWORD:admin123}                # å¯†ç ï¼ˆä»ç¯å¢ƒå˜é‡è¯»å–ï¼‰
    virtual-host: ${RABBITMQ_VHOST:smartats}    # è™šæ‹Ÿä¸»æœºï¼ˆç±»ä¼¼ MySQL çš„ databaseï¼‰
    listener:
      simple:
        acknowledge-mode: manual  # æ‰‹åŠ¨ç¡®è®¤æ¶ˆæ¯ï¼ˆç¡®ä¿æ¶ˆæ¯ä¸ä¸¢å¤±ï¼‰
        prefetch: 1             # æ¯æ¬¡åªä»é˜Ÿåˆ—å– 1 æ¡æ¶ˆæ¯ï¼ˆä¿è¯é¡ºåºï¼‰

  # ==================== Jackson é…ç½®ï¼ˆJSON åºåˆ—åŒ–ï¼‰====================
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss   # æ—¥æœŸæ ¼å¼
    time-zone: Asia/Shanghai            # æ—¶åŒº
    default-property-inclusion: non_null # ä¸åºåˆ—åŒ– null å€¼ï¼ˆå‡å°‘ JSON å¤§å°ï¼‰

  # ==================== Spring AI é…ç½®ï¼ˆæ™ºè°± AIï¼‰====================
  # æ™ºè°± API å®Œå…¨å…¼å®¹ OpenAI æ ¼å¼ï¼Œä½¿ç”¨ OpenAI starter
  ai:
    openai:
      api-key: ${ZHIPU_API_KEY:placeholder-set-in-env}                    # æ™ºè°± API Key
      base-url: https://open.bigmodel.cn/api/paas/v4  # æ™ºè°± API åœ°å€
      chat:
        enabled: true
        options:
          # æ¨¡å‹é€‰æ‹©ï¼ˆ2026å¹´2æœˆæœ€æ–°ï¼‰
          model: ${ZHIPU_MODEL:glm-4-flash-250414}  # å¼€å‘æµ‹è¯•ç”¨å…è´¹æ¨¡å‹
          temperature: 0.3                          # æ¸©åº¦ï¼ˆ0-1ï¼Œç®€å†è§£æå»ºè®® 0.3ï¼‰
          max-tokens: 4000                          # æœ€å¤§ token æ•°

server:
  port: 8080                    # åº”ç”¨ç«¯å£ï¼ˆæµè§ˆå™¨è®¿é—® http://localhost:8080ï¼‰
  servlet:
    context-path: /api/v1         # å…¨å±€è·¯å¾„å‰ç¼€ï¼ˆæ‰€æœ‰æ¥å£ä»¥ /api/v1 å¼€å¤´ï¼‰

# ==================== Actuator å¥åº·æ£€æŸ¥é…ç½® ====================
management:
  health:
    mail:
      enabled: false  # ç¦ç”¨é‚®ä»¶å¥åº·æ£€æŸ¥ï¼ˆé‚®ä»¶æœåŠ¡ä¸å½±å“åº”ç”¨æ ¸å¿ƒåŠŸèƒ½ï¼‰

# ==================== MyBatis-Plus é…ç½® ====================
mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true    # æ•°æ®åº“ä¸‹åˆ’çº¿ â†’ Java é©¼å³°å‘½åï¼ˆuser_name â†’ userNameï¼‰
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl  # æ‰“å° SQL æ—¥å¿—ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
  global-config:
    db-config:
      id-type: auto                    # ä¸»é”®è‡ªå¢ï¼ˆMySQL ç”¨ autoï¼ŒPostgreSQL ç”¨ assign_idï¼‰
      logic-delete-field: deleted        # é€»è¾‘åˆ é™¤å­—æ®µï¼ˆè½¯åˆ é™¤ï¼‰
      logic-delete-value: 1             # åˆ é™¤åçš„å€¼
      logic-not-delete-value: 0         # æœªåˆ é™¤çš„å€¼

# ==================== æ—¥å¿—é…ç½® ====================
logging:
  level:
    root: INFO                       # å…¨å±€æ—¥å¿—çº§åˆ«
    com.smartats: DEBUG              # æœ¬é¡¹ç›®çš„æ—¥å¿—çº§åˆ«ï¼ˆå¼€å‘ç”¨ DEBUGï¼‰
    com.smartats.mapper: DEBUG       # Mapper æ¥å£æ—¥å¿—ï¼ˆæ‰“å° SQLï¼‰
  pattern:
    console: '%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n'  # æ—¥å¿—æ ¼å¼

# ==================== åº”ç”¨è‡ªå®šä¹‰é…ç½® ====================
smartats:
  jwt:
    secret: ${JWT_SECRET:SmartATS2026SecretKeyMustBeLongEnoughForHS256}    # JWT å¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é¡»æ”¹ï¼ï¼‰
    expiration: 7200              # Access Token è¿‡æœŸæ—¶é—´ï¼ˆ2å°æ—¶ï¼Œå•ä½ï¼šç§’ï¼‰
    refresh-expiration: 604800    # Refresh Token è¿‡æœŸæ—¶é—´ï¼ˆ7å¤©ï¼‰

  file:
    upload-path: ./data/uploads    # æ–‡ä»¶ä¸Šä¼ è·¯å¾„ï¼ˆç®€å†å­˜å‚¨ä½ç½®ï¼‰
    max-size: 10485760           # æœ€å¤§æ–‡ä»¶å¤§å°ï¼ˆ10MB = 10 * 1024 * 1024ï¼‰

  ai:
    daily-quota: 100              # æ¯æ—¥ AI è°ƒç”¨é…é¢
    embedding:
      model: ${ZHIPU_EMBEDDING_MODEL:embedding-3}  # æ™ºè°± embedding-3ï¼Œ1024 ç»´

  cors:
    allowed-origins: "*"          # å¼€å‘ç¯å¢ƒå…è®¸æ‰€æœ‰åŸŸåï¼Œç”Ÿäº§ç¯å¢ƒé€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®

  verification-code:
    expire-time: 300              # éªŒè¯ç è¿‡æœŸæ—¶é—´ï¼ˆ5åˆ†é’Ÿ = 300ç§’ï¼‰

minio:
  endpoint: ${MINIO_ENDPOINT:http://localhost:9000}
  access-key: ${MINIO_ACCESS_KEY:admin}
  secret-key: ${MINIO_SECRET_KEY:admin123456}
  bucket-name: smartats-resumes
  connect-timeout: 10000  # 10ç§’
  write-timeout: 60000     # 60ç§’
  read-timeout: 10000      # 10ç§’

# ==================== Milvus å‘é‡æ•°æ®åº“é…ç½® ====================
milvus:
  host: ${MILVUS_HOST:localhost}
  port: ${MILVUS_PORT:19530}
  database: ${MILVUS_DATABASE:default}
  connect-timeout: 10000  # 10ç§’
